name = "katelyatv"
compatibility_date = "2024-09-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = ".vercel/output/static"

# 生产环境配置（正式上线使用）
[env.production]
name = "katelyatv"

# 生产环境 D1 数据库配置（已填入你的数据库信息）
[[env.production.d1_databases]]
binding = "DB"  # 与项目代码默认引用名一致，无需修改
database_name = "katelyatv"  # 你的数据库名称
database_id = "14095f51-6cbd-4664-b6c2-5a26e9d96ab3"  # 你的数据库 ID

# 生产环境变量（已配置完整）
[env.production.vars]
NEXT_PUBLIC_STORAGE_TYPE = "d1"
NEXT_PUBLIC_SITE_NAME = "KatelyaTV"
NEXT_PUBLIC_SITE_DESCRIPTION = "高性能影视播放平台"
NEXTAUTH_URL = "https://your-domain.pages.dev"  # 替换为你的 Cloudflare Pages 实际域名（如 xxx.pages.dev）
IMAGE_PROXY_ENABLED = "true"
CACHE_TTL = "3600"
CORS_ORIGIN = "*"
RATE_LIMIT_MAX = "100"
RATE_LIMIT_WINDOW = "60000"
HEALTH_CHECK_ENABLED = "true"
HEALTH_CHECK_INTERVAL = "30"
LOG_LEVEL = "info"
LOG_FORMAT = "json"
NODE_ENV = "production"

# 预览环境配置（用于测试，可与生产库共用，也可单独建测试库）
[env.preview]
name = "katelyatv-preview"

# 预览环境 D1 数据库配置（默认复用生产库，如需测试库可替换 ID）
[[env.preview.d1_databases]]
binding = "DB"
database_name = "katelyatv"
database_id = "14095f51-6cbd-4664-b6c2-5a26e9d96ab3"

# 预览环境变量
[env.preview.vars]
NEXT_PUBLIC_STORAGE_TYPE = "d1"
NEXT_PUBLIC_SITE_NAME = "KatelyaTV"
NEXT_PUBLIC_SITE_DESCRIPTION = "高性能影视播放平台"
IMAGE_PROXY_ENABLED = "true"
NODE_ENV = "production"
